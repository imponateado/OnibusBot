# OnibusBot üöå

*A Telegram bot for tracking bus positions and sending real-time notifications*

[English](#english) | [Portugu√™s](#portugu√™s)

---

## English

### Overview

OnibusBot is a Telegram bot designed to help users track public bus positions in real-time. The bot provides location updates and periodic notifications for selected bus lines.

### Features

- üöå **Real-time bus tracking**: Get current positions of buses of specific lines
- ‚è∞ **Periodic notifications**: Get updates every 2 minutes for subscribed lines
- üîÑ **Direction selection**: Choose between outbound ("IDA") and return ("VOLTA") directions
- üõë **Easy unsubscribe**: Stop notifications with a simple button click
- üñ•Ô∏è **Cross-platform daemon**: Runs as a service on both Linux (systemd) and Windows

### Prerequisites

- .NET 6.0 or later
- Telegram Bot Token (obtained from [@BotFather](https://t.me/botfather))

### Installation

1. **Clone the repository:**
   ```bash
   git clone https://github.com/imponateado/OnibusBot.git
   cd OnibusBot
   ```

2. **Set up your bot token:**
   
   **Option A: Environment Variable**
   ```bash
   export BOT_TOKEN="your_telegram_bot_token_here"
   ```
   
   **Option B: .env file**
   Create a `.env` file in the project root:
   ```
   BOT_TOKEN=your_telegram_bot_token_here
   ```

3. **Build the project:**
   ```bash
   dotnet build
   ```

4. **Run the bot:**
   ```bash
   dotnet run
   ```

### Running as a Service

#### Linux (systemd)

1. **Build for production:**
   ```bash
   dotnet publish -c Release -o /opt/onibusbot
   ```

2. **Create systemd service file** (`/etc/systemd/system/onibusbot.service`):
   ```ini
   [Unit]
   Description=OnibusBot Telegram Service
   After=network.target

   [Service]
   Type=notify
   ExecStart=/opt/onibusbot/OnibusBot
   Restart=always
   User=onibusbot
   Environment=BOT_TOKEN=your_token_here

   [Install]
   WantedBy=multi-user.target
   ```

3. **Enable and start the service:**
   ```bash
   sudo systemctl enable onibusbot
   sudo systemctl start onibusbot
   ```

#### Windows Service

1. **Build for production:**
   ```cmd
   dotnet publish -c Release -o C:\OnibusBot
   ```

2. **Install as Windows Service:**
   ```cmd
   sc create OnibusBot binPath="C:\OnibusBot\OnibusBot.exe"
   sc start OnibusBot
   ```

### How to Use

1. **Start a conversation** with your bot on Telegram
2. **Send `/start`** or say "oi" to begin
3. **Enter a bus line number** (e.g., "175")
4. **Select the exact line** from the available options
5. **Choose direction**: "IDA" (outbound) or "VOLTA" (return)
6. **Receive notifications** every 2 minutes with bus locations
7. **Stop notifications** anytime using the "‚åê Parar notifica√ß√µes" button

### Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Submit a pull request

### License

This project is open source. Check the repository for license details.

### Support

If you encounter any issues or have suggestions, open an issue on the [GitHub repository](https://github.com/imponateado/OnibusBot).

---

## Portugu√™s

### Vis√£o Geral

OnibusBot √© um bot do Telegram projetado para ajudar usu√°rios a acompanhar posi√ß√µes de √¥nibus p√∫blicos em tempo real. O bot fornece atualiza√ß√µes de localiza√ß√£o e notifica√ß√µes peri√≥dicas para linhas de √¥nibus selecionadas.

### Funcionalidades

- üöå **Rastreamento em tempo real**: Obtenha posi√ß√µes atuais dos √¥nibus em linhas espec√≠ficas
- ‚è∞ **Notifica√ß√µes peri√≥dicas**: Receba atualiza√ß√µes a cada 2 minutos para rotas inscritas
- üîÑ **Sele√ß√£o de dire√ß√£o**: Escolha entre dire√ß√µes "IDA" e "VOLTA"
- üõë **Cancelamento f√°cil**: Pare notifica√ß√µes com um simples clique
- üñ•Ô∏è **Daemon multiplataforma**: Executa como servi√ßo no Linux (systemd) e Windows

### Pr√©-requisitos

- .NET 6.0 ou superior
- Token do Bot do Telegram (obtido do [@BotFather](https://t.me/botfather))

### Instala√ß√£o

1. **Clone o reposit√≥rio:**
   ```bash
   git clone https://github.com/imponateado/OnibusBot.git
   cd OnibusBot
   ```

2. **Configure seu token do bot:**
   
   **Op√ß√£o A: Vari√°vel de Ambiente**
   ```bash
   export BOT_TOKEN="seu_token_do_telegram_aqui"
   ```
   
   **Op√ß√£o B: Arquivo .env**
   Crie um arquivo `.env` na raiz do projeto:
   ```
   BOT_TOKEN=seu_token_do_telegram_aqui
   ```

3. **Compile o projeto:**
   ```bash
   dotnet build
   ```

4. **Execute o bot:**
   ```bash
   dotnet run
   ```

### Executando como Servi√ßo

#### Linux (systemd)

1. **Compile para produ√ß√£o:**
   ```bash
   dotnet publish -c Release -o /opt/onibusbot
   ```

2. **Crie o arquivo de servi√ßo systemd** (`/etc/systemd/system/onibusbot.service`):
   ```ini
   [Unit]
   Description=OnibusBot Telegram Service
   After=network.target

   [Service]
   Type=notify
   ExecStart=/opt/onibusbot/OnibusBot
   Restart=always
   User=onibusbot
   Environment=BOT_TOKEN=seu_token_aqui

   [Install]
   WantedBy=multi-user.target
   ```

3. **Habilite e inicie o servi√ßo:**
   ```bash
   sudo systemctl enable onibusbot
   sudo systemctl start onibusbot
   ```

#### Servi√ßo do Windows

1. **Compile para produ√ß√£o:**
   ```cmd
   dotnet publish -c Release -o C:\OnibusBot
   ```

2. **Instale como Servi√ßo do Windows:**
   ```cmd
   sc create OnibusBot binPath="C:\OnibusBot\OnibusBot.exe"
   sc start OnibusBot
   ```

### Como Usar

1. **Inicie uma conversa** com seu bot no Telegram
2. **Envie `/start`** ou diga "oi" para come√ßar
3. **Digite um n√∫mero de linha de √¥nibus** (ex: "175")
4. **Selecione a linha exata** das op√ß√µes dispon√≠veis
5. **Escolha a dire√ß√£o**: "IDA" ou "VOLTA"
6. **Receba notifica√ß√µes** a cada 2 minutos com localiza√ß√µes dos √¥nibus
7. **Pare as notifica√ß√µes** a qualquer momento usando o bot√£o "‚åê Parar notifica√ß√µes"

### Contribuindo

1. Fa√ßa um fork do reposit√≥rio
2. Crie uma branch para sua funcionalidade
3. Fa√ßa suas altera√ß√µes
4. Envie um pull request

### Licen√ßa

Este projeto √© de c√≥digo aberto. Verifique o reposit√≥rio para detalhes da licen√ßa.

### Suporte

Se voc√™ encontrar problemas ou tiver sugest√µes, por favor abra uma issue no [reposit√≥rio do GitHub](https://github.com/imponateado/OnibusBot).